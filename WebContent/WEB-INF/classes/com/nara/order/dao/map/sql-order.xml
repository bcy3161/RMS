<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd"> 

<mapper namespace="order">

	<!-- get Menu List for filling Option -->
	<select id="getMenuList" parameterType="java.util.Map" resultType="java.util.HashMap">
		select 
			menu_no	as	menu_no,
			menu_name	as	menu_name,
			menu_size	as	menu_size,
			menu_cost	as	menu_cost
		from
			menu
	</select>
	
	<!-- get Customer Infomation -->
	<select id="getCustomerInfo" parameterType="java.util.Map" resultType="java.util.HashMap">
		select
			cust_no	as	cust_no,
			address	as	address,
			phone	as	phone
		from
			customer
		where
			address	=	#{address, jdbcType=VARCHAR, javaType=String}
			or
			phone	=	#{phone, jdbcType=VARCHAR, javaType=String}
	</select>
	
	<!-- add New Customer -->
	<insert id="addNewOrder" parameterType="com.nara.order.vo.AddOrder">
		<selectKey order="BEFORE" keyProperty="sales_no" resultType="int">
			select 
				nvl(max(to_number(sales_no)),0)+1
			from
				sales
		</selectKey>
		insert into sales
			(sales_no, cust_no, menu, cost_sum, sales_date, pay)
		values
			(#{sales_no}, #{cust_no}, #{menu},#{cost_sum}, sysdate, 1)
	</insert>
	
	
</mapper>






